<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <title>TECH BLOG</title>
    <!-- <link href="/css/output.css" rel="stylesheet" /> -->
    <!-- SWITCH BACK TO LINKED CSS BEFORE POSTING  -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"
  >
    <div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0">
      <!-- HEADER -->
      <header class="flex items-center justify-between py-10">
        <div class="h-6 text-2xl font-semibold block">
          <a href="/">Tech Blog</a>
        </div>

        <div class="flex items-center text-base leading-5">
          <ul class="flex">
            <li>
              <a
                class="pl-12 font-medium text-gray-900 dark:text-gray-100"
                href="/blog"
                >Blog</a
              >
            </li>
            <% if(isAuthenticated){ %>
            <li>
              <a
                class="pl-12 font-medium text-gray-900 dark:text-gray-100"
                href="/admin"
                >Admin</a
              >
            </li>
            <% } %>
            <li>
              <a
                class="pl-12 font-medium text-gray-900 dark:text-gray-100"
                href="/logout"
                >Logout</a
              >
            </li>
          </ul>
        </div>
      </header>

      <!-- MAIN -->

      <main class="mb-auto">
        <div class="divide-y divide-gray-200 dark:divide-gray-700">
          <div class="space-y-2 pt-6 pb-8 md:space-y-5">
            <h1
              class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-6xl md:leading-14"
            >
              Admin
            </h1>
            <% if (posts.length) { %>
            <button
              class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
            >
              <a href="/admin/create">Create New Post →</a>
            </button>
            <% } %>
          </div>

          <% if (posts.length) { %>
          <ul class="divide-y divide-gray-200 dark:divide-gray-700">
            <% posts.forEach((post) => { %>
            <li class="py-6">
              <article>
                <div
                  class="space-y-5 xl:grid xl:grid-cols-4 xl:items-baseline xl:space-y-0"
                >
                  <dl>
                    <dt class="sr-only">Published on</dt>
                    <dd
                      class="text-sm leading-6 text-gray-500 dark:text-gray-400"
                    >
                      <time datetime="<%= post.createdAt %>"
                        ><%= post.createdAt.toLocaleDateString()
                        %></time
                      >
                    </dd>
                    <dt class="sr-only">Comments</dt>
                    <dd
                      class="text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"
                    >
                      <%= post.Comments.length %> comments
                    </dd>
                  </dl>
                  <div class="space-y-5 xl:col-span-3">
                    <div class="space-y-3">
                      <div>
                        <h2
                          class="text-2xl font-bold leading-8 tracking-tight"
                        >
                          <a
                            class="text-gray-900 dark:text-gray-100"
                            href="blog/post/<%= post.id %>"
                            ><%= post.title %></a
                          >
                        </h2>
                        <!-- TAGS PLACEHOLDER 
                                <div class="flex flex-wrap">
                                <a
                                  class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
                                  href="#"
                                  >Tag</a
                                ><a
                                  class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
                                  href="#"
                                  >Tag</a
                                ><a
                                  class="mr-3 text-sm font-medium uppercase text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
                                  href="#"
                                  >Tag</a
                                >
                              </div> -->
                      </div>
                      <div
                        class="prose max-w-none text-gray-500 dark:text-gray-400"
                      >
                        <%= post.content.substring(0, 100) %>...
                      </div>
                    </div>
                    <div class="text-base font-medium leading-6">
                      <a
                        class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
                        aria-label='Read "New features in v1"'
                        href="/admin/edit/<%= post.id %>"
                        >Edit Post →</a
                      >
                    </div>
                  </div>
                </div>
              </article>
            </li>
            <% }) %>
          </ul>
          <%} else { %>
          <button
            class="pt-6 text-center text-primary-500 hover:text-primary-600 dark:hover:text-primary-400"
          >
            <a href="/admin/create">Create Your First Post →</a>
          </button>
          <% } %>
        </div>
      </main>

      <!-- FOOTER -->
      <footer>
        <div class="text-center text-gray-400 p-6">
          © 2022 Copyright :
          <a href="/">Tech Blog Corp</a>
        </div>
      </footer>
    </div>
  </body>
</html>
